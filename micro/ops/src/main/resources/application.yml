spring:
  application:
    name: ops
  jackson:
    deserialization:
      fail-on-unknown-properties: true
  datasource:
    url: ${OPS_DB_URL:jdbc:postgresql://localhost:5432/ops}
    username: ${OPS_DB_USER:ops}
    password: ${OPS_DB_PASSWORD:ops}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        jdbc:
          time_zone: UTC
  flyway:
    enabled: true

springdoc:
  api-docs:
    path: /openapi
  swagger-ui:
    path: /swagger

server:
  port: ${OPS_PORT:8084}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus

ops:
  security:
    internalToken: ${OPS_INTERNAL_TOKEN:dev-internal-token}
    allowManualIngest: ${OPS_ALLOW_MANUAL_INGEST:false}

  kafka:
    bootstrapServers: ${KAFKA_BOOTSTRAP:localhost:9092}
    groupId: ${OPS_KAFKA_GROUP:ops-v1}
    topics:
      paymentPosted: ${TOPIC_PAYMENT_POSTED:payment.posted}
      topupPosted: ${TOPIC_TOPUP_POSTED:topup.posted}
      onboardingWelcome: ${TOPIC_ONBOARDING_WELCOME:onboarding.welcome}
      auditEvents: ${TOPIC_AUDIT_EVENTS:audit.events}

  notifications:
    dispatcher:
      pollIntervalMs: ${OPS_DISPATCH_POLL_MS:500}
      batchSize: ${OPS_DISPATCH_BATCH:50}
      baseBackoffMs: ${OPS_DISPATCH_BACKOFF_BASE_MS:500}
      maxBackoffMs: ${OPS_DISPATCH_BACKOFF_MAX_MS:30000}
      maxRetries: ${OPS_DISPATCH_MAX_RETRIES:10}

